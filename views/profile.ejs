<% include ./partials/header.ejs%>
<div class="relative min-h-screen h-content w-full bg-zinc-100">
  <form id="uploadform" hidden action="/fileupload" method="post" enctype="multipart/form-data">
    <input type="file" name="image" id="">
  </form>
  <div class="h-20 absolute w-full md:flex">
    <div class="h-full w-full flex items-center px-0 lg:px-8 gap-5 md:gap-3">
      <div class="ml-5 md:ml-5 lg:ml-5 flex gap-2 items-center">
        <img
          src="https://cdn.icon-icons.com/icons2/2429/PNG/512/pinterest_logo_icon_147250.png"
          alt=""
          class="h-8"
        />
      </div>
      <div class="hidden sm:flex items-center gap-3 xl:gap-7 font-semibold">
        <a href="#">Home</a>
        <a href="#">Explore</a>
        <a href="/feed" class="bg-gray-300 px-3 py-2 rounded-lg">Feed</a>
      </div>
      <div
        class="hidden md:flex h-full ml-3 w-1/2 lg:w-[40vw] flex items-center"
      >
        <div class="relative h-[50px] w-full cursor-pointer">
          <i
            class="ri-search-line absolute text-lg text-zinc-600 top-3 left-4"
          ></i>
          <input
            type="text"
            name="searchbar"
            id=""
            class="h-full w-full rounded-full bg-gray-200 hover:bg-zinc-300 px-[45px] py-2 text-md placeholder:text-zinc-500"
            placeholder="Search your pins"
          />
        </div>
      </div>
      <div
        class="h-full w-full sm:w-1/2 lg:w-1/3 flex items-center gap-5 md:gap-3 xl:gap-10 font-semibold justify-center sm:justify-end md:justify-center"
      >
        <a href="" class="">Your Pins <i class="ri-arrow-down-s-line"></i></a>
        <i
          class="ri-notification-3-fill text-2xl cursor-pointer text-zinc-600"
        ></i>
        <i class="ri-message-2-fill text-2xl cursor-pointer text-zinc-600"></i>
        <a
          href="/logout"
          class="bg-red-600 cursor-pointer px-2 md:px-3 lg:px-5 py-2 rounded-full text-white"
          >Log out</a
        >
      </div>
    </div>
  </div>
  <div class="h-[28rem]  w-full flex items-center flex-col gap-2">
    <div class="relative">
      <span id="uploadimg" class="w-8 h-8 absolute bottom-0 right-0 rounded-full flex items-center justify-center bg-zinc-300 cursor-pointer">
        <i class="ri-pencil-fill text-lg"></i>
      </span>
      <div class="h-32 w-32 mt-24 rounded-full bg-zinc-200 overflow-hidden">
        <img
          src="/images/uploads/<%= user.profileImage %>"
          alt=""
          class="h-full w-full object-cover"
        />
      </div>
    </div>
    <h1 class="text-4xl font-semibold"><%= user.name %></h1>
    <div class="flex justify-center items-center gap-2 text-zinc-800">
      <svg
        aria-label="pinterest"
        class="BNH gUZ U9O kVc"
        height="16"
        role="img"
        viewBox="0 0 24 24"
        width="16"
      >
        <path
          d="M7.55 23.12c-.15-1.36-.04-2.67.25-3.93L9 14.02a7 7 0 0 1-.34-2.07c0-1.68.8-2.88 2.08-2.88.88 0 1.53.62 1.53 1.8q0 .57-.22 1.28l-.53 1.73q-.15.5-.15.91c0 1.2.92 1.88 2.09 1.88 2.08 0 3.57-2.16 3.57-4.96 0-3.12-2.04-5.11-5.06-5.11-3.36 0-5.49 2.19-5.49 5.23 0 1.23.38 2.37 1.11 3.15-.24.4-.5.48-.88.48-1.2 0-2.34-1.7-2.34-4 0-3.99 3.2-7.16 7.68-7.16 4.7 0 7.66 3.28 7.66 7.33 0 4.07-2.88 7.13-5.98 7.13a3.8 3.8 0 0 1-3.07-1.47l-.61 2.5c-.33 1.28-.83 2.5-1.62 3.67A12 12 0 0 0 24 11.99 12 12 0 1 0 7.55 23.12"
        ></path>
      </svg>
      <h1><%= user.username %></h1>
    </div>
    <div class="flex justify-center items-center gap-2">
      <h1>0 followers</h1>
      <h1>0 following</h1>
    </div>
    <div class="flex justify-center items-center gap-2">
      <a
        href=""
        class="bg-zinc-300 px-2 md:px-3 lg:px-5 py-2 rounded-full font-semibold"
        >Share</a
      >
      <a
        href="/edit"
        class="bg-zinc-300 px-2 md:px-3 lg:px-5 py-2 rounded-full font-semibold"
        >Edit profile</a
      >
    </div>
    <div class="mt-3">
      <a
        href="/addpost"
        class="bg-red-600 px-2 md:px-3 lg:px-5 py-2 rounded-full text-white"
        >Add new post</a
      >
    </div>
  </div>
  <div
    class="h-content w-full px-4 py-2 flex flex-wrap gap-10 items-center justify-center"
  >
  <% user.posts.forEach(function(elem){%>
    <div class=" w-52">
      <div class="h-40 w-52 rounded-xl bg-white overflow-hidden">
        <img
          src="/images/uploads/<%= elem?.image %>"
          alt=""
          class="w-full h-full object-cover"
        />
      </div>
      <h3 class="ml-2 mt-2 w-full text-lg font-semibold"><%= elem?.title%></h3>
      <h5 class="ml-2 text-sm w-full leading-none"><%= elem?.description %></h5>
    </div>
    <% }) %>
  </div>
</div>

<script>
  document.querySelector("#uploadimg").addEventListener("click",function(){
    document.querySelector("#uploadform input").click();
  })

  document.querySelector("#uploadform input").addEventListener("change",function(){
    document.querySelector("#uploadform").submit();
  })
</script>
<% include ./partials/footer.ejs%>
